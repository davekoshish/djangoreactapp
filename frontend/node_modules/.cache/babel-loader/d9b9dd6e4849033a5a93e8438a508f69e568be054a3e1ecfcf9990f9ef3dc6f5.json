{"ast":null,"code":"import { API } from \"../../Backend\";\nimport { cartEmpty } from \"../../core/helper/Carthelper\";\n//cause after sign out i want cart to became empty\n\nexport const signup = user => {\n  return fetch(`${API}user/`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const signin = user => {\n  const formData = new FormData();\n  for (const name in user) {\n    formData.append(name, user[name]);\n  }\n  return fetch(`${API}user/login/`, {\n    method: \"POST\",\n    body: formData\n  }).then(response => {\n    console.log(\"SUCESS\", response);\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const authenticate = (data, next) => {\n  if (typeof window !== undefined) {\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\n    next();\n  }\n};\nexport const iisAuthenticated = () => {\n  if (typeof window == undefined) {\n    return false;\n  }\n  if (localStorage.getItem(\"jwt\")) {\n    return JSON.parse(localStorage.getItem(\"jwt\"));\n  } else {\n    return false;\n  }\n};\nexport const signout = next => {\n  const userId = iisAuthenticated() && iisAuthenticated().user.userId;\n  if (typeof window !== undefined) {\n    localStorage.removeItem(\"jwt\");\n    cartEmpty(() => {});\n    //next();\n\n    return fetch(`${API}user/logout/${userId}`, {\n      method: \"GET\"\n    }).then(response => {\n      console.log(\"signout success\");\n      next();\n    }).catch(err => console.log(err));\n  }\n};","map":{"version":3,"names":["API","cartEmpty","signup","user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","signin","formData","FormData","name","append","authenticate","data","next","window","undefined","localStorage","setItem","iisAuthenticated","getItem","parse","signout","userId","removeItem"],"sources":["C:/Users/davek/Desktop/Study/Project/django/frontend/src/auth/helper/index.js"],"sourcesContent":["import {API} from \"../../Backend\";\r\nimport { cartEmpty } from \"../../core/helper/Carthelper\";\r\n//cause after sign out i want cart to became empty\r\n\r\n\r\nexport const signup = (user) =>\r\n{\r\n    return fetch(`${API}user/`,{\r\n        method:\"POST\",\r\n        headers:{\r\n            Accept: \"application/json\",\r\n            \"Content-Type\":\"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err))\r\n};\r\n\r\nexport const signin = (user) =>\r\n{\r\n    const formData = new FormData()\r\n\r\n    for (const name in user)\r\n    {\r\n        formData.append(name,user[name]) \r\n    }\r\n\r\n    return fetch(`${API}user/login/`,{\r\n        method:\"POST\",\r\n        body:formData\r\n    })\r\n    .then((response)=>\r\n        {\r\n            console.log(\"SUCESS\",response);\r\n            return response.json();\r\n        })\r\n    .catch(err=>console.log(err))\r\n};\r\n\r\nexport const authenticate = (data,next)=>\r\n{\r\n    if(typeof window!==undefined)\r\n    {\r\n        localStorage.setItem(\"jwt\",JSON.stringify(data));\r\n        next();\r\n    }\r\n};\r\n\r\n\r\nexport const iisAuthenticated = () =>\r\n{\r\n    if (typeof window==undefined)\r\n    {\r\n        return false\r\n    }\r\n    if (localStorage.getItem(\"jwt\"))\r\n    {\r\n        return JSON.parse(localStorage.getItem(\"jwt\"))\r\n    }\r\n    else{\r\n        return false;\r\n    }\r\n\r\n};\r\n\r\nexport const signout = next =>\r\n{\r\n    const userId=iisAuthenticated() && iisAuthenticated().user.userId\r\n    if(typeof window!==undefined)\r\n    {\r\n        localStorage.removeItem(\"jwt\")\r\n        cartEmpty(()=>{\r\n            \r\n        });\r\n        //next();\r\n\r\n        return fetch(`${API}user/logout/${userId}`,\r\n        {\r\n            method:\"GET\"\r\n        })\r\n        .then(response=>{console.log(\"signout success\")\r\n        next();})\r\n        .catch(err=>console.log(err));\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA,SAAQA,GAAG,QAAO,eAAe;AACjC,SAASC,SAAS,QAAQ,8BAA8B;AACxD;;AAGA,OAAO,MAAMC,MAAM,GAAIC,IAAI,IAC3B;EACI,OAAOC,KAAK,CAAE,GAAEJ,GAAI,OAAM,EAAC;IACvBK,MAAM,EAAC,MAAM;IACbC,OAAO,EAAC;MACJC,MAAM,EAAE,kBAAkB;MAC1B,cAAc,EAAC;IACnB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI;EAC7B,CAAC,CAAC,CACDQ,IAAI,CAACC,QAAQ,IAAE;IACZ,OAAOA,QAAQ,CAACC,IAAI,EAAE;EAC1B,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;AACjC,CAAC;AAED,OAAO,MAAMG,MAAM,GAAIf,IAAI,IAC3B;EACI,MAAMgB,QAAQ,GAAG,IAAIC,QAAQ,EAAE;EAE/B,KAAK,MAAMC,IAAI,IAAIlB,IAAI,EACvB;IACIgB,QAAQ,CAACG,MAAM,CAACD,IAAI,EAAClB,IAAI,CAACkB,IAAI,CAAC,CAAC;EACpC;EAEA,OAAOjB,KAAK,CAAE,GAAEJ,GAAI,aAAY,EAAC;IAC7BK,MAAM,EAAC,MAAM;IACbG,IAAI,EAACW;EACT,CAAC,CAAC,CACDR,IAAI,CAAEC,QAAQ,IACX;IACII,OAAO,CAACC,GAAG,CAAC,QAAQ,EAACL,QAAQ,CAAC;IAC9B,OAAOA,QAAQ,CAACC,IAAI,EAAE;EAC1B,CAAC,CAAC,CACLC,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;AACjC,CAAC;AAED,OAAO,MAAMQ,YAAY,GAAG,CAACC,IAAI,EAACC,IAAI,KACtC;EACI,IAAG,OAAOC,MAAM,KAAGC,SAAS,EAC5B;IACIC,YAAY,CAACC,OAAO,CAAC,KAAK,EAACpB,IAAI,CAACC,SAAS,CAACc,IAAI,CAAC,CAAC;IAChDC,IAAI,EAAE;EACV;AACJ,CAAC;AAGD,OAAO,MAAMK,gBAAgB,GAAG,MAChC;EACI,IAAI,OAAOJ,MAAM,IAAEC,SAAS,EAC5B;IACI,OAAO,KAAK;EAChB;EACA,IAAIC,YAAY,CAACG,OAAO,CAAC,KAAK,CAAC,EAC/B;IACI,OAAOtB,IAAI,CAACuB,KAAK,CAACJ,YAAY,CAACG,OAAO,CAAC,KAAK,CAAC,CAAC;EAClD,CAAC,MACG;IACA,OAAO,KAAK;EAChB;AAEJ,CAAC;AAED,OAAO,MAAME,OAAO,GAAGR,IAAI,IAC3B;EACI,MAAMS,MAAM,GAACJ,gBAAgB,EAAE,IAAIA,gBAAgB,EAAE,CAAC3B,IAAI,CAAC+B,MAAM;EACjE,IAAG,OAAOR,MAAM,KAAGC,SAAS,EAC5B;IACIC,YAAY,CAACO,UAAU,CAAC,KAAK,CAAC;IAC9BlC,SAAS,CAAC,MAAI,CAEd,CAAC,CAAC;IACF;;IAEA,OAAOG,KAAK,CAAE,GAAEJ,GAAI,eAAckC,MAAO,EAAC,EAC1C;MACI7B,MAAM,EAAC;IACX,CAAC,CAAC,CACDM,IAAI,CAACC,QAAQ,IAAE;MAACI,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC/CQ,IAAI,EAAE;IAAC,CAAC,CAAC,CACRX,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACjC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}